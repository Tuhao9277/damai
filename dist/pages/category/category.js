"use strict";require(["../../static/conf/config.js"],function(){require(["jquery"],function(i){var o,d=[{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"ych",info:"演唱会"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"hjgj",info:"话剧歌剧"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"tyjj",info:"体育"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"qz",info:"儿童亲子"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"zlxx",info:"展览休闲"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"yyh",info:"音乐会"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"xsxq",info:"曲苑杂坛"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"wdbl",info:"舞蹈芭蕾"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"dm",info:"二次元"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"lyzl",info:"旅游展览"},{href:"//search.damai.cn/search.htm?ctl=%E6%BC%94%E5%94%B1%E4%BC%9A&order=1&cty=",item:"lyyy",info:"旅游演艺"}],t="";i(document).ready(function(){if(0==i(".span-user").attr("status")&&null!=i.cookie("people")){var t=JSON.parse(i.cookie("people")).user;1<t.length?(i(".span-user").html(t),i(".span-user").attr("status",1)):i(".span-user").html("登录")}});var a=i(".city").next();function e(){i.ajax({url:"https://search.damai.cn/searchajax.html?keyword=&cty=".concat(t,"&ctl=&sctl=&tsg=0&st=&et=&order=1&pageSize=30&currPage=1&tn="),type:"get",dataType:"json",success:function(t){var a=t.pageData.resultData,e=t.pageData.factMap.categoryname.concat(t.pageData.factMap.tag_names);i(".category").html("");for(var c=0;c<e.length;c++)o='<span class="factor-content-item" >'.concat(d[c].info," </span>"),i(".category").append(o);i(".item__box").html("");for(var n=0;n<a.length;n++)l(a[n]);i(".search-box-keyword").html(t.pageData.totalResults)}})}function l(t){o='\n           <div data-v-678d2ef7="" class="items">\n           <a data-v-678d2ef7="" href="http://localhost:9999/pages/product/product.html?id='.concat(t.projectid,"&venue=").concat(t.venue,"&city=").concat(t.venuecity,'" target="_blank" class="items__img">\n               <span data-v-678d2ef7="" class="items__img__tag">').concat(t.categoryname,'</span>\n               <img data-v-678d2ef7="" alt="项目图片" data-src="//img.alicdn.com/bao/uploaded/i4/2251059038/O1CN01cPCWOe2GdSAdmixz2_!!0-item_pic.jpg_q60.jpg_.webp" src="').concat(t.verticalPic,'" lazy="loaded">\n           </a>\n           <div data-v-678d2ef7="" class="items__txt">\n               <div data-v-678d2ef7="" class="items__txt__title">\n                   <span data-v-678d2ef7="">【').concat(t.cityname,'】</span>\n                   <a data-v-678d2ef7="" href="http://localhost:9999/pages/product/product.html?id=').concat(t.projectid,"&venue=").concat(t.venue,"&city=").concat(t.venuecity,'" target="_blank" >').concat(t.name,'\n                   </a>\n               </div>\n               \x3c!----\x3e\n               <div data-v-678d2ef7="" class="items__txt__time">\n                   <a data-v-678d2ef7="" href="javascript:;" class="items__txt__venue__icon"></a>\n                   ').concat(t.venuecity," | ").concat(t.venue,'\n               </div>\n               <div data-v-678d2ef7="" class="items__txt__time">\n                   <a data-v-678d2ef7="" href="javascript:;" class="items__txt__time__icon"></a>\n                  ').concat(t.showtime,'\n               </div>\n               <div data-v-678d2ef7="" class="items__txt__tags">\n                   \x3c!----\x3e\n                   \x3c!----\x3e\n               </div>\n               <div data-v-678d2ef7="" class="items__txt__price"><span data-v-678d2ef7="">\n                       ').concat(t.price_str,'\n                       <i data-v-678d2ef7="">元</i></span>\n                  ').concat(t.showstatus,"\n               </div>\n           </div>\n       </div>"),i(".item__box").append(o)}function c(t){o='\n        <div class="search__item">\n\t<a href="http://localhost:9999/pages/product/product.html?id='.concat(t.projectId,'" target="_blank" data-spm="test" class="search__item__poster">\n\t\t<img src="').concat(t.verticalPic,'" alt="">\n\t</a> \n\t<div class="search__item__info">\n\t\t\t<a href="http://localhost:9999/pages/product/product.html?id=').concat(t.projectId,'" target="_blank" class="search__item__info__title">《').concat(t.projectName,'》</a> \n\t\t<div class="search__item__info__venue">').concat(t.venue,'</div>\n\t\t <div class="search__item__info__venue">').concat(t.showTime,'</div> \n\t\t <div class="search__item__info__price"><strong>').concat(t.price,"元</strong>起\n        </div>\n    </div>\n</div>\n        "),i(".search__box").append(o)}a.on("click",function(){a.hasClass("factor-more")?(a.html("收起"),a.removeClass("factor-more"),a.addClass("factor-less")):(a.html("更多"),a.removeClass("factor-less"),a.addClass("factor-more")),i(".city").children().slice(20).toggle()}),i(".factor-content").on("click",".factor-content-item",function(){(i(this).parent().classname="city")&&(i(".city").prev().removeClass("factor-content-item-active"),i(this).parent().children().removeClass("factor-content-item-active"),i(this).addClass("factor-content-item-active"),t=i(this).text(),i(".factor-selected-city").text(i(this).text()),e())}),i(".city").prev().on("click",function(){i(".city").children().removeClass("factor-content-item-active"),i(".factor-selected-city").text("全国"),t="",e()}),i.ajax({url:"https://search.damai.cn/searchajax.html?keyword=&cty=&ctl=&sctl=&tsg=0&st=&et=&order=1&pageSize=30&currPage=1&tn=",type:"get",dataType:"json",success:function(t){for(var a=t.pageData.resultData,e=0;e<a.length;e++)l(a[e]);for(var c=t.pageData.factMap.cityname,n=0;n<c.length;n++)o=' <span class="factor-content-item" >'.concat(c[n].name," </span>"),i(".city").append(o);var s=t.pageData.factMap.categoryname.concat(t.pageData.factMap.tag_names);i(".category").html("");for(var r=0;r<s.length;r++)o='<span class="factor-content-item" >'.concat(d[r].info," </span>"),i(".category").append(o);i(".city").children().slice(20).toggle(),i(".search-box-keyword").html(t.pageData.totalResults)}}),i.ajax({url:"https://search.damai.cn/external/gl.html?projects=594441602010,594350362632,594277459855,594088796138,592432015785,593992948825,593451401607,593756817833,593516280422,594538993658,593071617586,593615326552,594345563975,177014,594262939151,593960612221,592773319724,594266977600,592009864267,594650710773,593227496518,592029157846,593425703047,593234362451,593566033575,594041756268,592712478175,592880144508,592694878429,593155803884&ctl=",type:"get",dataType:"json",success:function(t){for(var a=t.suggest,e=0;e<3;e++)c(a[e])}})})});